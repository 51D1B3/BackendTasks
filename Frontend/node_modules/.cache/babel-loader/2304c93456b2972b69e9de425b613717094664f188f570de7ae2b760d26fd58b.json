{"ast":null,"code":"import _objectSpread from\"c:/Users/51D1B3/Documents/GestionTasks/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useCallback}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{useAuth}from'../contexts/AuthContext';import Input from'../components/UI/Input';import Button from'../components/UI/Button';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{var _location$state,_location$state$from;const[formData,setFormData]=useState({email:'',password:''});const[errors,setErrors]=useState({});const[loading,setLoading]=useState(false);const{login}=useAuth();const navigate=useNavigate();const location=useLocation();const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/';const handleChange=useCallback(e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));if(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}},[errors]);const validateForm=useCallback(()=>{const newErrors={};if(!formData.email){newErrors.email='L\\'email est obligatoire';}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email='Format d\\'email invalide';}if(!formData.password){newErrors.password='Le mot de passe est obligatoire';}setErrors(newErrors);return Object.keys(newErrors).length===0;},[formData]);const handleSubmit=useCallback(async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);try{await login(formData);navigate(from,{replace:true});}catch(error){var _error$response,_error$response$data;setErrors({submit:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Erreur de connexion'});}finally{setLoading(false);}},[formData,validateForm,login,navigate,from]);return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md w-full space-y-8\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"mt-6 text-center text-3xl font-extrabold text-gray-900\",children:\"\\uD83D\\uDCCB Gestionnaire de T\\xE2ches\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2 text-center text-sm text-gray-600\",children:\"Connectez-vous \\xE0 votre compte\"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"mt-8 space-y-6\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(Input,{label:\"Email\",name:\"email\",type:\"email\",value:formData.email,onChange:handleChange,error:errors.email,placeholder:\"votre@email.com\",autoComplete:\"email\"}),/*#__PURE__*/_jsx(Input,{label:\"Mot de passe\",name:\"password\",type:\"password\",value:formData.password,onChange:handleChange,error:errors.password,placeholder:\"Votre mot de passe\",autoComplete:\"current-password\"})]}),errors.submit&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-danger-50 border border-danger-200 rounded-md p-3\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-danger-600\",children:errors.submit})}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"w-full\",loading:loading,disabled:loading,children:\"Se connecter\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Pas encore de compte ?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"font-medium text-primary-600 hover:text-primary-500\",children:\"Cr\\xE9er un compte\"})]})})]})]})});};export default Login;","map":{"version":3,"names":["React","useState","useCallback","Link","useNavigate","useLocation","useAuth","Input","Button","jsx","_jsx","jsxs","_jsxs","Login","_location$state","_location$state$from","formData","setFormData","email","password","errors","setErrors","loading","setLoading","login","navigate","location","from","state","pathname","handleChange","e","name","value","target","prev","_objectSpread","validateForm","newErrors","test","Object","keys","length","handleSubmit","preventDefault","replace","error","_error$response","_error$response$data","submit","response","data","message","className","children","onSubmit","label","type","onChange","placeholder","autoComplete","disabled","to"],"sources":["c:/Users/51D1B3/Documents/GestionTasks/Frontend/src/pages/Login.js"],"sourcesContent":["import React, { useState, useCallback } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport Input from '../components/UI/Input';\nimport Button from '../components/UI/Button';\n\nconst Login = () => {\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [loading, setLoading] = useState(false);\n\n  const { login } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  const from = location.state?.from?.pathname || '/';\n\n  const handleChange = useCallback((e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    \n    if (errors[name]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: ''\n      }));\n    }\n  }, [errors]);\n\n  const validateForm = useCallback(() => {\n    const newErrors = {};\n    \n    if (!formData.email) {\n      newErrors.email = 'L\\'email est obligatoire';\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = 'Format d\\'email invalide';\n    }\n    \n    if (!formData.password) {\n      newErrors.password = 'Le mot de passe est obligatoire';\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  }, [formData]);\n\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n    \n    if (!validateForm()) {\n      return;\n    }\n\n    setLoading(true);\n    try {\n      await login(formData);\n      navigate(from, { replace: true });\n    } catch (error) {\n      setErrors({ \n        submit: error.response?.data?.message || 'Erreur de connexion' \n      });\n    } finally {\n      setLoading(false);\n    }\n  }, [formData, validateForm, login, navigate, from]);\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            ðŸ“‹ Gestionnaire de TÃ¢ches\n          </h2>\n          <p className=\"mt-2 text-center text-sm text-gray-600\">\n            Connectez-vous Ã  votre compte\n          </p>\n        </div>\n        \n        <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          <div className=\"space-y-4\">\n            <Input\n              label=\"Email\"\n              name=\"email\"\n              type=\"email\"\n              value={formData.email}\n              onChange={handleChange}\n              error={errors.email}\n              placeholder=\"votre@email.com\"\n              autoComplete=\"email\"\n            />\n            \n            <Input\n              label=\"Mot de passe\"\n              name=\"password\"\n              type=\"password\"\n              value={formData.password}\n              onChange={handleChange}\n              error={errors.password}\n              placeholder=\"Votre mot de passe\"\n              autoComplete=\"current-password\"\n            />\n          </div>\n\n          {errors.submit && (\n            <div className=\"bg-danger-50 border border-danger-200 rounded-md p-3\">\n              <p className=\"text-sm text-danger-600\">{errors.submit}</p>\n            </div>\n          )}\n\n          <Button\n            type=\"submit\"\n            className=\"w-full\"\n            loading={loading}\n            disabled={loading}\n          >\n            Se connecter\n          </Button>\n\n          <div className=\"text-center\">\n            <p className=\"text-sm text-gray-600\">\n              Pas encore de compte ?{' '}\n              <Link \n                to=\"/register\" \n                className=\"font-medium text-primary-600 hover:text-primary-500\"\n              >\n                CrÃ©er un compte\n              </Link>\n            </p>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}